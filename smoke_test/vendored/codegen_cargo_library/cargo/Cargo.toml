[package]
name = "compile_with_bazel"
version = "0.1.0"

[dependencies]
prost = "0.6"
prost-types = "0.6"

[build-dependencies]
prost-build = { version = "0.6" }

[lib]
path = "fake_lib.rs"

[raze]
workspace_path = "//vendored/codegen_cargo_library/cargo"
target = "x86_64-unknown-linux-gnu"

[raze.crates.prost-build.'0.6.1']
gen_buildrs = true
#rustc_env = [
#  "PROTOC=third-party/protobuf/protoc-linux-x86_64",
#  "PROTOC_INCLUDE=third-party/protobuf/include",
#]

# prost-derive --> proc-macro, which uses a build.rs file.
[raze.crates.proc-macro2.'1.0.12']
additional_flags = [
    "--cfg=u128",
    "--cfg=use_proc_macro",
    "--cfg=wrap_proc_macro",
]

# prost-build --> petgraph --> indexmap, which uses a build.rs file.
[raze.crates.indexmap.'1.3.2']
additional_flags = [
    "--cfg=has_std",
]
